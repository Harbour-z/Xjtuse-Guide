# 计算机组成原理 第六章作业

1. 考虑一个磁盘驱动器，它有8个面，每个面有512个磁道，每个磁道有64个扇区。扇区大小为1KB。平均寻道时间为8ms，道间移动时间为1.5ms，磁盘转速为3600rpm。读取一个柱面的连续磁道时，磁头无需移动。

   A 磁盘容量是多少？

   B 平均访问时间是多少？

   C 估算传输一个5MB文件所需的时间。假设文件存储于连续柱面上的连续扇区和磁道，起始位置为柱面i的扇区0，磁道0。

   D 突发传输速率是多少？
    a 假设每一个盘面都可以存放数据； b 应该指寻道时间+旋转延迟

   1. 磁盘容量为 8 \* 512 \* 64 \* 1024B = 256 MB

   2. 平均访问时间 = 平均寻道时间+平均访问延迟

      = 8ms + 1000/2*60 = 16.33ms

   3. 首先需要明确：在磁盘读写时，读取同一磁道上的不同柱面时，不需要进行道间移动，但是需要等待平均旋转延迟；读取不同磁道时，需要道间移动时间+平均旋转延迟。

      总共存在 5MB 数据，每个磁道的所有柱面加起来可存放 512KB 数据，因此需要 10 条磁道存放所有数据。

      总时间 = 平均寻道时间+9\* (道间移动时间 + 平均旋转延迟 + 读取时间) + (平均旋转延迟 + 读取时间)

      其中读取时间 = 8\* 每条磁道读取时间

      > 由于读取 10 条磁道的内容只需要 9 次切换，只需要计算 9 个道间移动时间

      = $8ms + 9\times (1.5ms+8.33ms+8\times 16.67ms)+(8.33ms+8\times 16.67ms)$ = 8 + 1288.71+141.69 = 1438.4ms

      > 取决于舍入精度，计算结果可能有微小的差别

   4. 突发传输速率为每秒最多能读取多少数据：

      突发传输速率= $(3600/60)\times 64 \times 1024 B$ = 3.75 MB/s。

   

2. 为计算机系统设计备份策略。一种选择是使用外置可插入式磁盘，其成本是每个500GB的磁盘驱动器需要150美元。另一个种方法是花2500美元购买一个磁带驱动器，并用50美元购买一个400GB的磁带（依据2008年价格）。通常现场有两套备份介质，交替写入备份，以防在备份时发生系统故障时，前面的备份还是完整的。还有第三套介质保持离线，但它定期与在线介质进行交换。

   A．假设你有1TB（1000GB）的数据要备份，那么磁盘备份系统的成本是多少？

   B 1TB的磁带备份系统的成本多少？

   C 为了使磁带策略更便宜，每个备份必须有多大？

   D 哪种备份策略更适合磁带？
   
   1. 一套磁盘备份系统需要两块 500GB 硬盘，而总共需要三套备份系统，因此成本为 $2\times 3 \times 150 = 900$ 美元
   
   2. 磁带备份系统需要一个磁带驱动器，由于需要三套备份，每套备份需要 $1000\div 400\approx 3$ 条磁带，因此总共需要 9 条磁带，总共需要花费2500 + 9 * 50 = 2950 美元
   
   3. 假设待备份数据大小为 xGB，那么：（ceil 指向上取整）
   
      磁盘备份系统的成本为 $150\times 3 \times cell(\dfrac{x}{500})$
   
      磁带备份系统的成本为 $2500 + 50 \times 3 \times ceil(\dfrac{x}{400})$
   
      要让磁带备份系统的价格低于磁盘备份系统，即解不等式：
      $$
      150 \times 3 \times cell(\dfrac{x}{500}) >= 2500 + 50 \times 3 \times ceil(\dfrac{x}{400})
      $$
      解得 x >= 4761.90 GB 时，磁带备份系统价格低于磁盘。
   
      因此，当备份大小大于 4762 GB（大约 5TB）后，采用磁带备份系统比磁盘备份系统更便宜。
   
   4. 离线介质更适合采用磁带，因为它不需要频繁读写，对读写速度要求不高；现场交替写入的两套备份介质更适合采用磁盘，因为现场备份需要较高的读写速度。